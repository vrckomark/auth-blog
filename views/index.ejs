<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./styles/style.css" />
    <script
      src="https://kit.fontawesome.com/3200730e91.js"
      crossorigin="anonymous"
    ></script>
    <style>
      .fa-circle-plus {
        color: #7bc265;
      }
    </style>
    <title>Blogs</title>
  </head>
  <body class="bg-background overflow-x-hidden">
    <% if(session.isAuth){ %>
    <a
      href="/blog/create"
      class="text-3xl bottom-10 right-10 fixed text-primary"
      ><i class="fa-solid fa-3x fa-circle-plus"></i
    ></a>
    <% } else {%>
    <a
      href="/register"
      class="text-3xl bottom-0 right-0 p-10 fixed text-primary"
    >
      Sign up to create a blog
    </a>
    <% } %> <%- include("navbar", { session }) %>
    <div class="p-10 flex flex-col w-screen justify-center items-center">
      <% blogs.map((blog)=>{ %>
      <a
        href="/blog/<%= blog._id %>"
        class="mb-8 w-1/2 flex flex-col border-2 border-secondary rounded-2xl p-5"
      >
        <div class="flex flex-col">
          <div class="text-xl text-secondary"><%= blog.author %></div>
          <div class="text-xl text-gray-600">
            <% date = new Date(blog.date) %> <%= date.getDate() %>/<%=
            date.getMonth()+1 %>/<%= date.getFullYear() %> | <%=
            date.getUTCHours()-(date.getTimezoneOffset()/60) %>:<%
            if(date.getMinutes()<10){ %>0<%= date.getMinutes() %><% } else {
            %><%= date.getMinutes() %><% } %>
          </div>
        </div>
        <div class="text-3xl my-2 text-primary"><%= blog.title %></div>
        <div class="text-xl text-gray-400 w-2/3 my-2">
          <%= blog.content.substring(0, 100) %><% if((blog.content).length>100){
          %>...<%}%>
        </div>
      </a>

      <% }) %>
    </div>
  </body>
</html>
